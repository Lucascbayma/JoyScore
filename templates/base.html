{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}JoyScore{% endblock %}</title> 
    
    <link rel="stylesheet" href="{% static 'jogos/css/style.css' %}">
    
    <link rel="stylesheet" href="{% static 'jogos/css/light-theme.css' %}" disabled id="light-theme-style">
    
    {% block extra_css %}
    {% endblock %}
    
</head>
<body data-theme="dark">
    <header class="header">
        <div class="logo-container">
            <img src="{% static 'jogos/imagens/logo.png' %}"
                 alt="JoyScore"
                 class="logo-img"
                 style="display:block; max-width:220px; max-height:72px; width:auto; height:auto;">
        </div>

        {% if request.resolver_match.url_name == 'home' %}
        <div class="header-search">
            <input type="text" id="game-search-input" placeholder="Pesquisar jogo...">
            <div id="autocomplete-results"></div>
        </div>
        {% endif %}

        <div class="right-section">
            <input type="checkbox" id="menu-toggle" hidden>
            <label for="menu-toggle" class="hamburger">
                <div></div>
                <div></div>
                <div></div>
            </label>
            <nav class="menu">
                <ul>
                    <li><a href="{% url 'jogos:home' %}">In√≠cio</a></li>
                    <li><a href="{% url 'jogos:filtrar_por_genero' %}">Filtrar Jogos</a></li>
                    <li><a href="{% url 'jogos:minha_biblioteca' %}">Biblioteca</a></li>
                    <li>
                        <a href="#" id="theme-toggle" style="text-decoration: none; color: inherit;">
                            <i class="fas fa-moon" id="theme-icon" style="margin-right: 8px; vertical-align: middle;"></i><span id="theme-text">Modo Branco</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main-content">
        {% block content %}
        {% endblock %}
    </main>

    <footer>
        <p>&copy; 2025-JoyScore</p>
    </footer>

    <script>
        const themeToggleBtn = document.getElementById('theme-toggle');

        if (themeToggleBtn) {
            themeToggleBtn.addEventListener('click', (event) => {
                event.preventDefault(); 
                const currentTheme = document.body.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });
        }

        const lightThemeStyle = document.getElementById('light-theme-style');
        const body = document.body;
        const themeIcon = document.getElementById('theme-icon');
        const themeText = document.getElementById('theme-text');

        function applyTheme(theme) {
            if (theme === 'light') {
                body.setAttribute('data-theme', 'light');
                lightThemeStyle.disabled = false;
                if (themeIcon) themeIcon.className = 'fas fa-sun'; 
                if (themeText) themeText.textContent = 'Modo Escuro'; 
            } else {
                body.setAttribute('data-theme', 'dark');
                lightThemeStyle.disabled = true;
                if (themeIcon) themeIcon.className = 'fas fa-moon'; 
                if (themeText) themeText.textContent = 'Modo Branco'; 
            }
            localStorage.setItem('theme', theme);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'dark'; 
            applyTheme(savedTheme);
        });
    </script>

    {% block extra_scripts %}
    {% endblock %}

</body>
</html>